<!-- 一个标尺--><!-- 一组标尺--><!-- 两层的楼梯--><!-- 超过两层的楼梯--><!-- 门--><!-- 门、窗、墙--><g transform="translate(10, 10)"><!-- 纵向标尺--><g transform="rotate(90 0,0) translate(0, -60)"><g ng-attr-transform="translate({{-metadata.scale * 80}}, 0)"><g transform=""><line style="" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{0}}" ng-attr-x2="{{0}}" ng-attr-y2="{{40}}"></line><line style="" ng-if="true" ng-attr-x1="{{(scaled.K*metadata.height+metadata.scale*160)}}" ng-attr-y1="{{0}}" ng-attr-x2="{{(scaled.K*metadata.height+metadata.scale*160)}}" ng-attr-y2="{{40}}"></line><line style="" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{40-6}}" ng-attr-x2="{{(scaled.K*metadata.height+metadata.scale*160)}}" ng-attr-y2="{{40-6}}"></line><text style="text-anchor: middle;" ng-attr-x="{{(scaled.K*metadata.height+metadata.scale*160)/2}}" ng-attr-y="{{40-8}}">{{defines.K*metadata.height+160}}</text></g></g><text x="-6" y="0">80</text><text ng-attr-x="{{scaled.K*metadata.height-3}}" y="0">80</text><g ng-repeat="i in _.range(metadata.height)" ng-attr-transform="translate({{scaled.K * $index}}, 0)"><g transform=""><line style="" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{0}}" ng-attr-x2="{{0}}" ng-attr-y2="{{20}}"></line><line style="" ng-if="true" ng-attr-x1="{{(scaled.K)}}" ng-attr-y1="{{0}}" ng-attr-x2="{{(scaled.K)}}" ng-attr-y2="{{20}}"></line><line style="" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{20-6}}" ng-attr-x2="{{(scaled.K)}}" ng-attr-y2="{{20-6}}"></line><text style="text-anchor: middle;" ng-attr-x="{{(scaled.K)/2}}" ng-attr-y="{{20-8}}">{{defines.K}}</text></g><g transform="translate(0, 60)"><line x1="0" y1="-10" x2="0" y2="-40"></line><circle cx="0" cy="0" r="8" fill="transparent" stroke="black"></circle><text x="-3" y="3">{{$index|letter}}</text><g ng-attr-transform="translate({{scaled.K}}, 0)" ng-if="$last"><line x1="0" y1="-10" x2="0" y2="-40"></line><circle cx="0" cy="0" r="8" fill="transparent" stroke="black"></circle><text x="-3" y="3">{{$index + 1|letter}}</text></g></g></g></g><g ng-attr-transform="translate({{100 + (metadata.options.stairs.left + (metadata.layer &gt; 6)) * scaled.aisle_width}}, 0)"><!-- 左边的楼梯--><g ng-if="metadata.options.stairs.left"><g ng-if="metadata.layer == 6" ng-attr-transform="translate({{-scaled.aisle_width}}, {{scaled.height - scaled.stairs_height}})"><rect style="fill: url(#StairsPattern)" ng-click="" ng-attr-x="{{0}}" ng-attr-y="{{0}}" ng-attr-width="{{scaled.aisle_width}}" ng-attr-height="{{scaled.stairs_height}}"></rect><line style="stroke-width: 3; stroke: gray;" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{scaled.stairs_height + scaled.aisle_width}}" ng-attr-x2="{{scaled.aisle_width}}" ng-attr-y2="{{scaled.stairs_height + scaled.aisle_width}}"></line><line style="stroke-width: 3; stroke: gray;" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{0}}" ng-attr-x2="{{0}}" ng-attr-y2="{{scaled.stairs_height + scaled.aisle_width}}"></line><g ng-attr-transform="translate(0, {{scaled.stairs_height + scaled.aisle_width + 20}})"><g transform=""><line style="" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{0}}" ng-attr-x2="{{0}}" ng-attr-y2="{{20}}"></line><line style="" ng-if="true" ng-attr-x1="{{(scaled.aisle_width - metadata.scale * 80)}}" ng-attr-y1="{{0}}" ng-attr-x2="{{(scaled.aisle_width - metadata.scale * 80)}}" ng-attr-y2="{{20}}"></line><line style="" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{20-6}}" ng-attr-x2="{{(scaled.aisle_width - metadata.scale * 80)}}" ng-attr-y2="{{20-6}}"></line><text style="text-anchor: middle;" ng-attr-x="{{(scaled.aisle_width - metadata.scale * 80)/2}}" ng-attr-y="{{20-8}}">{{defines.aisle_width}}</text></g></g></g><g ng-if="metadata.layer &gt; 6" ng-attr-transform="translate({{-scaled.aisle_width * 2}}, {{scaled.height - scaled.K}})"><rect style="stroke-width: 0; fill: url(#StairsPattern);" ng-click="" ng-attr-x="{{0}}" ng-attr-y="{{0}}" ng-attr-width="{{scaled.aisle_width * 2}}" ng-attr-height="{{scaled.K}}"></rect><line style="" ng-if="true" ng-attr-x1="{{scaled.aisle_width}}" ng-attr-y1="{{0}}" ng-attr-x2="{{scaled.aisle_width}}" ng-attr-y2="{{scaled.K}}"></line><line style="" ng-if="true" ng-attr-x1="{{scaled.aisle_width + 2.5}}" ng-attr-y1="{{0}}" ng-attr-x2="{{scaled.aisle_width + 2.5}}" ng-attr-y2="{{scaled.K}}"></line><line style="stroke-width: 0.5;" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{scaled.K}}" ng-attr-x2="{{scaled.aisle_width * 2}}" ng-attr-y2="{{scaled.K}}"></line><!-- 楼梯边缘边线--><line style="stroke-width: 3; stroke: gray;" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{-scaled.aisle_width}}" ng-attr-x2="{{0}}" ng-attr-y2="{{scaled.K + scaled.aisle_width}}"></line><line style="stroke-width: 3; stroke: gray;" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{-scaled.aisle_width}}" ng-attr-x2="{{scaled.aisle_width * 2}}" ng-attr-y2="{{-scaled.aisle_width}}"></line><line style="stroke-width: 3; stroke: gray;" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{scaled.K + scaled.aisle_width}}" ng-attr-x2="{{scaled.aisle_width * 2}}" ng-attr-y2="{{scaled.K + scaled.aisle_width}}"></line><!-- 下标尺--><g ng-attr-transform="translate(0, {{scaled.K + scaled.aisle_width + 20}})"><g transform=""><line style="" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{0}}" ng-attr-x2="{{0}}" ng-attr-y2="{{20}}"></line><line style="" ng-if="true" ng-attr-x1="{{(scaled.aisle_width)}}" ng-attr-y1="{{0}}" ng-attr-x2="{{(scaled.aisle_width)}}" ng-attr-y2="{{20}}"></line><line style="" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{20-6}}" ng-attr-x2="{{(scaled.aisle_width)}}" ng-attr-y2="{{20-6}}"></line><text style="text-anchor: middle;" ng-attr-x="{{(scaled.aisle_width)/2}}" ng-attr-y="{{20-8}}">{{defines.aisle_width}}</text></g><g ng-attr-transform="translate({{scaled.aisle_width}}, 0)"><g transform=""><line style="" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{0}}" ng-attr-x2="{{0}}" ng-attr-y2="{{20}}"></line><line style="" ng-if="true" ng-attr-x1="{{(scaled.aisle_width)}}" ng-attr-y1="{{0}}" ng-attr-x2="{{(scaled.aisle_width)}}" ng-attr-y2="{{20}}"></line><line style="" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{20-6}}" ng-attr-x2="{{(scaled.aisle_width)}}" ng-attr-y2="{{20-6}}"></line><text style="text-anchor: middle;" ng-attr-x="{{(scaled.aisle_width)/2}}" ng-attr-y="{{20-8}}">{{defines.aisle_width}}</text></g></g></g></g></g><!-- 右边的楼梯--><g ng-if="metadata.options.stairs.right"><g ng-if="metadata.layer == 6" ng-attr-transform="translate({{scaled.width}}, {{scaled.height - scaled.stairs_height}})"><rect style="fill: url(#StairsPattern)" ng-click="" ng-attr-x="{{0}}" ng-attr-y="{{0}}" ng-attr-width="{{scaled.aisle_width}}" ng-attr-height="{{scaled.stairs_height}}"></rect><line style="stroke-width: 3; stroke: gray;" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{scaled.stairs_height + scaled.aisle_width}}" ng-attr-x2="{{scaled.aisle_width}}" ng-attr-y2="{{scaled.stairs_height + scaled.aisle_width}}"></line><line style="stroke-width: 3; stroke: gray;" ng-if="true" ng-attr-x1="{{scaled.aisle_width}}" ng-attr-y1="{{0}}" ng-attr-x2="{{scaled.aisle_width}}" ng-attr-y2="{{scaled.stairs_height + scaled.aisle_width}}"></line><g ng-attr-transform="translate(0, {{scaled.stairs_height + scaled.aisle_width + 20}})"><g transform=""><line style="" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{0}}" ng-attr-x2="{{0}}" ng-attr-y2="{{20}}"></line><line style="" ng-if="true" ng-attr-x1="{{(scaled.aisle_width - metadata.scale * 80)}}" ng-attr-y1="{{0}}" ng-attr-x2="{{(scaled.aisle_width - metadata.scale * 80)}}" ng-attr-y2="{{20}}"></line><line style="" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{20-6}}" ng-attr-x2="{{(scaled.aisle_width - metadata.scale * 80)}}" ng-attr-y2="{{20-6}}"></line><text style="text-anchor: middle;" ng-attr-x="{{(scaled.aisle_width - metadata.scale * 80)/2}}" ng-attr-y="{{20-8}}">{{defines.aisle_width}}</text></g></g></g><g ng-if="metadata.layer &gt; 6" ng-attr-transform="translate({{scaled.width}}, {{scaled.height - scaled.K}})"><rect style="stroke-width: 0; fill: url(#StairsPattern);" ng-click="" ng-attr-x="{{0}}" ng-attr-y="{{0}}" ng-attr-width="{{scaled.aisle_width * 2}}" ng-attr-height="{{scaled.K}}"></rect><line style="" ng-if="true" ng-attr-x1="{{scaled.aisle_width}}" ng-attr-y1="{{0}}" ng-attr-x2="{{scaled.aisle_width}}" ng-attr-y2="{{scaled.K}}"></line><line style="" ng-if="true" ng-attr-x1="{{scaled.aisle_width + 2.5}}" ng-attr-y1="{{0}}" ng-attr-x2="{{scaled.aisle_width + 2.5}}" ng-attr-y2="{{scaled.K}}"></line><line style="stroke-width: 0.5;" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{scaled.K}}" ng-attr-x2="{{scaled.aisle_width * 2}}" ng-attr-y2="{{scaled.K}}"></line><!-- 楼梯边缘边线--><line style="stroke-width: 3; stroke: gray;" ng-if="true" ng-attr-x1="{{scaled.aisle_width * 2}}" ng-attr-y1="{{-scaled.aisle_width}}" ng-attr-x2="{{scaled.aisle_width * 2}}" ng-attr-y2="{{scaled.K + scaled.aisle_width}}"></line><line style="stroke-width: 3; stroke: gray;" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{-scaled.aisle_width}}" ng-attr-x2="{{scaled.aisle_width * 2}}" ng-attr-y2="{{-scaled.aisle_width}}"></line><line style="stroke-width: 3; stroke: gray;" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{scaled.K + scaled.aisle_width}}" ng-attr-x2="{{scaled.aisle_width * 2}}" ng-attr-y2="{{scaled.K + scaled.aisle_width}}"></line><!-- 下标尺--><g ng-attr-transform="translate(0, {{scaled.K + scaled.aisle_width + 20}})"><g transform=""><line style="" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{0}}" ng-attr-x2="{{0}}" ng-attr-y2="{{20}}"></line><line style="" ng-if="true" ng-attr-x1="{{(scaled.aisle_width)}}" ng-attr-y1="{{0}}" ng-attr-x2="{{(scaled.aisle_width)}}" ng-attr-y2="{{20}}"></line><line style="" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{20-6}}" ng-attr-x2="{{(scaled.aisle_width)}}" ng-attr-y2="{{20-6}}"></line><text style="text-anchor: middle;" ng-attr-x="{{(scaled.aisle_width)/2}}" ng-attr-y="{{20-8}}">{{defines.aisle_width}}</text></g><g ng-attr-transform="translate({{scaled.aisle_width}}, 0)"><g transform=""><line style="" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{0}}" ng-attr-x2="{{0}}" ng-attr-y2="{{20}}"></line><line style="" ng-if="true" ng-attr-x1="{{(scaled.aisle_width)}}" ng-attr-y1="{{0}}" ng-attr-x2="{{(scaled.aisle_width)}}" ng-attr-y2="{{20}}"></line><line style="" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{20-6}}" ng-attr-x2="{{(scaled.aisle_width)}}" ng-attr-y2="{{20-6}}"></line><text style="text-anchor: middle;" ng-attr-x="{{(scaled.aisle_width)/2}}" ng-attr-y="{{20-8}}">{{defines.aisle_width}}</text></g></g></g></g></g><!-- 房间--><g ng-repeat="col in rooms" ng-attr-transform="translate({{scaled.K * $index}}, 0)" font-size="16" font-weight="bold" text-anchor="middle"><g ng-repeat="room in col" ng-attr-transform="translate(0, {{scaled.K * $index}})"><rect style="" ng-click="clicked(room, col, $index)" ng-attr-x="{{0}}" ng-attr-y="{{0}}" ng-attr-width="{{scaled.K}}" ng-attr-height="{{scaled.K}}" class="hover"></rect><g ng-attr-transform=""><g ng-if="room.front == defines.board_types.window"><rect style="stroke: silver; fill: silver;" ng-click="" ng-attr-x="{{0}}" ng-attr-y="{{scaled.K}}" ng-attr-width="{{scaled.K}}" ng-attr-height="{{2.5}}"></rect><text style="" ng-attr-x="{{scaled.K / 2}}" ng-attr-y="{{scaled.K - 2}}">C</text></g><g ng-if="room.front == defines.board_types.board"><rect style="stroke-width: 1; fill: white;" ng-click="" ng-attr-x="{{0}}" ng-attr-y="{{scaled.K}}" ng-attr-width="{{scaled.K}}" ng-attr-height="{{2.5}}"></rect></g><g ng-if="room.front == defines.board_types.gate_dual"><rect style="stroke: silver; fill: silver;" ng-click="" ng-attr-x="{{0}}" ng-attr-y="{{scaled.K / 2}}" ng-attr-width="{{2.5}}" ng-attr-height="{{scaled.K / 2}}"></rect><text style="" ng-attr-x="{{scaled.K / 4}}" ng-attr-y="{{scaled.K - 2}}">M</text><path ng-attr-d="M{{scaled.K / 2}},{{scaled.K}} Q{{scaled.K / 2}},{{scaled.K / 2}} {{0}},{{scaled.K / 2}}" stroke="silver" fill="none"></path><rect style="stroke: silver; fill: silver;" ng-click="" ng-attr-x="{{scaled.K - 2.5}}" ng-attr-y="{{scaled.K / 2}}" ng-attr-width="{{2.5}}" ng-attr-height="{{scaled.K / 2}}"></rect><text style="" ng-attr-x="{{scaled.K / 4 * 3}}" ng-attr-y="{{scaled.K - 2}}">M</text><path ng-attr-d="M{{scaled.K / 2}},{{scaled.K}} Q{{scaled.K / 2}},{{scaled.K / 2}} {{scaled.K - 2.5}},{{scaled.K / 2}}" stroke="silver" fill="none"></path></g><g ng-if="room.front == defines.board_types.gate_left_left"><rect style="stroke-width: 1; fill: white;" ng-click="" ng-attr-x="{{scaled.K / 2}}" ng-attr-y="{{scaled.K}}" ng-attr-width="{{scaled.K / 2}}" ng-attr-height="{{2.5}}"></rect><rect style="stroke: silver; fill: silver;" ng-click="" ng-attr-x="{{0}}" ng-attr-y="{{scaled.K / 2}}" ng-attr-width="{{2.5}}" ng-attr-height="{{scaled.K / 2}}"></rect><text style="" ng-attr-x="{{scaled.K / 4}}" ng-attr-y="{{scaled.K - 2}}">M</text><path ng-attr-d="M{{scaled.K / 2}},{{scaled.K}} Q{{scaled.K / 2}},{{scaled.K / 2}} {{0}},{{scaled.K / 2}}" stroke="silver" fill="none"></path></g><g ng-if="room.front == defines.board_types.gate_left_right"><rect style="stroke-width: 1; fill: white;" ng-click="" ng-attr-x="{{scaled.K / 2}}" ng-attr-y="{{scaled.K}}" ng-attr-width="{{scaled.K / 2}}" ng-attr-height="{{2.5}}"></rect><g ng-attr-transform="translate({{-scaled.K / 2}}, 0)"><rect style="stroke: silver; fill: silver;" ng-click="" ng-attr-x="{{scaled.K - 2.5}}" ng-attr-y="{{scaled.K / 2}}" ng-attr-width="{{2.5}}" ng-attr-height="{{scaled.K / 2}}"></rect><text style="" ng-attr-x="{{scaled.K / 4 * 3}}" ng-attr-y="{{scaled.K - 2}}">M</text><path ng-attr-d="M{{scaled.K / 2}},{{scaled.K}} Q{{scaled.K / 2}},{{scaled.K / 2}} {{scaled.K - 2.5}},{{scaled.K / 2}}" stroke="silver" fill="none"></path></g></g><g ng-if="room.front == defines.board_types.gate_right_left"><rect style="stroke-width: 1; fill: white;" ng-click="" ng-attr-x="{{0}}" ng-attr-y="{{scaled.K}}" ng-attr-width="{{scaled.K / 2}}" ng-attr-height="{{2.5}}"></rect><g ng-attr-transform="translate({{scaled.K / 2}}, 0)"><rect style="stroke: silver; fill: silver;" ng-click="" ng-attr-x="{{0}}" ng-attr-y="{{scaled.K / 2}}" ng-attr-width="{{2.5}}" ng-attr-height="{{scaled.K / 2}}"></rect><text style="" ng-attr-x="{{scaled.K / 4}}" ng-attr-y="{{scaled.K - 2}}">M</text><path ng-attr-d="M{{scaled.K / 2}},{{scaled.K}} Q{{scaled.K / 2}},{{scaled.K / 2}} {{0}},{{scaled.K / 2}}" stroke="silver" fill="none"></path></g></g><g ng-if="room.front == defines.board_types.gate_right_right"><rect style="stroke-width: 1; fill: white;" ng-click="" ng-attr-x="{{0}}" ng-attr-y="{{scaled.K}}" ng-attr-width="{{scaled.K / 2}}" ng-attr-height="{{2.5}}"></rect><rect style="stroke: silver; fill: silver;" ng-click="" ng-attr-x="{{scaled.K - 2.5}}" ng-attr-y="{{scaled.K / 2}}" ng-attr-width="{{2.5}}" ng-attr-height="{{scaled.K / 2}}"></rect><text style="" ng-attr-x="{{scaled.K / 4 * 3}}" ng-attr-y="{{scaled.K - 2}}">M</text><path ng-attr-d="M{{scaled.K / 2}},{{scaled.K}} Q{{scaled.K / 2}},{{scaled.K / 2}} {{scaled.K - 2.5}},{{scaled.K / 2}}" stroke="silver" fill="none"></path></g></g><g ng-attr-transform="rotate(-90 {{scaled.K / 2}}, {{scaled.K / 2}})"><g ng-if="room.right == defines.board_types.window"><rect style="stroke: silver; fill: silver;" ng-click="" ng-attr-x="{{0}}" ng-attr-y="{{scaled.K}}" ng-attr-width="{{scaled.K}}" ng-attr-height="{{2.5}}"></rect><text style="" ng-attr-x="{{scaled.K / 2}}" ng-attr-y="{{scaled.K - 2}}">C</text></g><g ng-if="room.right == defines.board_types.board"><rect style="stroke-width: 1; fill: white;" ng-click="" ng-attr-x="{{0}}" ng-attr-y="{{scaled.K}}" ng-attr-width="{{scaled.K}}" ng-attr-height="{{2.5}}"></rect></g><g ng-if="room.right == defines.board_types.gate_dual"><rect style="stroke: silver; fill: silver;" ng-click="" ng-attr-x="{{0}}" ng-attr-y="{{scaled.K / 2}}" ng-attr-width="{{2.5}}" ng-attr-height="{{scaled.K / 2}}"></rect><text style="" ng-attr-x="{{scaled.K / 4}}" ng-attr-y="{{scaled.K - 2}}">M</text><path ng-attr-d="M{{scaled.K / 2}},{{scaled.K}} Q{{scaled.K / 2}},{{scaled.K / 2}} {{0}},{{scaled.K / 2}}" stroke="silver" fill="none"></path><rect style="stroke: silver; fill: silver;" ng-click="" ng-attr-x="{{scaled.K - 2.5}}" ng-attr-y="{{scaled.K / 2}}" ng-attr-width="{{2.5}}" ng-attr-height="{{scaled.K / 2}}"></rect><text style="" ng-attr-x="{{scaled.K / 4 * 3}}" ng-attr-y="{{scaled.K - 2}}">M</text><path ng-attr-d="M{{scaled.K / 2}},{{scaled.K}} Q{{scaled.K / 2}},{{scaled.K / 2}} {{scaled.K - 2.5}},{{scaled.K / 2}}" stroke="silver" fill="none"></path></g><g ng-if="room.right == defines.board_types.gate_left_left"><rect style="stroke-width: 1; fill: white;" ng-click="" ng-attr-x="{{scaled.K / 2}}" ng-attr-y="{{scaled.K}}" ng-attr-width="{{scaled.K / 2}}" ng-attr-height="{{2.5}}"></rect><rect style="stroke: silver; fill: silver;" ng-click="" ng-attr-x="{{0}}" ng-attr-y="{{scaled.K / 2}}" ng-attr-width="{{2.5}}" ng-attr-height="{{scaled.K / 2}}"></rect><text style="" ng-attr-x="{{scaled.K / 4}}" ng-attr-y="{{scaled.K - 2}}">M</text><path ng-attr-d="M{{scaled.K / 2}},{{scaled.K}} Q{{scaled.K / 2}},{{scaled.K / 2}} {{0}},{{scaled.K / 2}}" stroke="silver" fill="none"></path></g><g ng-if="room.right == defines.board_types.gate_left_right"><rect style="stroke-width: 1; fill: white;" ng-click="" ng-attr-x="{{scaled.K / 2}}" ng-attr-y="{{scaled.K}}" ng-attr-width="{{scaled.K / 2}}" ng-attr-height="{{2.5}}"></rect><g ng-attr-transform="translate({{-scaled.K / 2}}, 0)"><rect style="stroke: silver; fill: silver;" ng-click="" ng-attr-x="{{scaled.K - 2.5}}" ng-attr-y="{{scaled.K / 2}}" ng-attr-width="{{2.5}}" ng-attr-height="{{scaled.K / 2}}"></rect><text style="" ng-attr-x="{{scaled.K / 4 * 3}}" ng-attr-y="{{scaled.K - 2}}">M</text><path ng-attr-d="M{{scaled.K / 2}},{{scaled.K}} Q{{scaled.K / 2}},{{scaled.K / 2}} {{scaled.K - 2.5}},{{scaled.K / 2}}" stroke="silver" fill="none"></path></g></g><g ng-if="room.right == defines.board_types.gate_right_left"><rect style="stroke-width: 1; fill: white;" ng-click="" ng-attr-x="{{0}}" ng-attr-y="{{scaled.K}}" ng-attr-width="{{scaled.K / 2}}" ng-attr-height="{{2.5}}"></rect><g ng-attr-transform="translate({{scaled.K / 2}}, 0)"><rect style="stroke: silver; fill: silver;" ng-click="" ng-attr-x="{{0}}" ng-attr-y="{{scaled.K / 2}}" ng-attr-width="{{2.5}}" ng-attr-height="{{scaled.K / 2}}"></rect><text style="" ng-attr-x="{{scaled.K / 4}}" ng-attr-y="{{scaled.K - 2}}">M</text><path ng-attr-d="M{{scaled.K / 2}},{{scaled.K}} Q{{scaled.K / 2}},{{scaled.K / 2}} {{0}},{{scaled.K / 2}}" stroke="silver" fill="none"></path></g></g><g ng-if="room.right == defines.board_types.gate_right_right"><rect style="stroke-width: 1; fill: white;" ng-click="" ng-attr-x="{{0}}" ng-attr-y="{{scaled.K}}" ng-attr-width="{{scaled.K / 2}}" ng-attr-height="{{2.5}}"></rect><rect style="stroke: silver; fill: silver;" ng-click="" ng-attr-x="{{scaled.K - 2.5}}" ng-attr-y="{{scaled.K / 2}}" ng-attr-width="{{2.5}}" ng-attr-height="{{scaled.K / 2}}"></rect><text style="" ng-attr-x="{{scaled.K / 4 * 3}}" ng-attr-y="{{scaled.K - 2}}">M</text><path ng-attr-d="M{{scaled.K / 2}},{{scaled.K}} Q{{scaled.K / 2}},{{scaled.K / 2}} {{scaled.K - 2.5}},{{scaled.K / 2}}" stroke="silver" fill="none"></path></g></g><g ng-attr-transform="rotate(-180 {{scaled.K / 2}}, {{scaled.K / 2}})"><g ng-if="room.back == defines.board_types.window"><rect style="stroke: silver; fill: silver;" ng-click="" ng-attr-x="{{0}}" ng-attr-y="{{scaled.K}}" ng-attr-width="{{scaled.K}}" ng-attr-height="{{2.5}}"></rect><text style="" ng-attr-x="{{scaled.K / 2}}" ng-attr-y="{{scaled.K - 2}}">C</text></g><g ng-if="room.back == defines.board_types.board"><rect style="stroke-width: 1; fill: white;" ng-click="" ng-attr-x="{{0}}" ng-attr-y="{{scaled.K}}" ng-attr-width="{{scaled.K}}" ng-attr-height="{{2.5}}"></rect></g><g ng-if="room.back == defines.board_types.gate_dual"><rect style="stroke: silver; fill: silver;" ng-click="" ng-attr-x="{{0}}" ng-attr-y="{{scaled.K / 2}}" ng-attr-width="{{2.5}}" ng-attr-height="{{scaled.K / 2}}"></rect><text style="" ng-attr-x="{{scaled.K / 4}}" ng-attr-y="{{scaled.K - 2}}">M</text><path ng-attr-d="M{{scaled.K / 2}},{{scaled.K}} Q{{scaled.K / 2}},{{scaled.K / 2}} {{0}},{{scaled.K / 2}}" stroke="silver" fill="none"></path><rect style="stroke: silver; fill: silver;" ng-click="" ng-attr-x="{{scaled.K - 2.5}}" ng-attr-y="{{scaled.K / 2}}" ng-attr-width="{{2.5}}" ng-attr-height="{{scaled.K / 2}}"></rect><text style="" ng-attr-x="{{scaled.K / 4 * 3}}" ng-attr-y="{{scaled.K - 2}}">M</text><path ng-attr-d="M{{scaled.K / 2}},{{scaled.K}} Q{{scaled.K / 2}},{{scaled.K / 2}} {{scaled.K - 2.5}},{{scaled.K / 2}}" stroke="silver" fill="none"></path></g><g ng-if="room.back == defines.board_types.gate_left_left"><rect style="stroke-width: 1; fill: white;" ng-click="" ng-attr-x="{{scaled.K / 2}}" ng-attr-y="{{scaled.K}}" ng-attr-width="{{scaled.K / 2}}" ng-attr-height="{{2.5}}"></rect><rect style="stroke: silver; fill: silver;" ng-click="" ng-attr-x="{{0}}" ng-attr-y="{{scaled.K / 2}}" ng-attr-width="{{2.5}}" ng-attr-height="{{scaled.K / 2}}"></rect><text style="" ng-attr-x="{{scaled.K / 4}}" ng-attr-y="{{scaled.K - 2}}">M</text><path ng-attr-d="M{{scaled.K / 2}},{{scaled.K}} Q{{scaled.K / 2}},{{scaled.K / 2}} {{0}},{{scaled.K / 2}}" stroke="silver" fill="none"></path></g><g ng-if="room.back == defines.board_types.gate_left_right"><rect style="stroke-width: 1; fill: white;" ng-click="" ng-attr-x="{{scaled.K / 2}}" ng-attr-y="{{scaled.K}}" ng-attr-width="{{scaled.K / 2}}" ng-attr-height="{{2.5}}"></rect><g ng-attr-transform="translate({{-scaled.K / 2}}, 0)"><rect style="stroke: silver; fill: silver;" ng-click="" ng-attr-x="{{scaled.K - 2.5}}" ng-attr-y="{{scaled.K / 2}}" ng-attr-width="{{2.5}}" ng-attr-height="{{scaled.K / 2}}"></rect><text style="" ng-attr-x="{{scaled.K / 4 * 3}}" ng-attr-y="{{scaled.K - 2}}">M</text><path ng-attr-d="M{{scaled.K / 2}},{{scaled.K}} Q{{scaled.K / 2}},{{scaled.K / 2}} {{scaled.K - 2.5}},{{scaled.K / 2}}" stroke="silver" fill="none"></path></g></g><g ng-if="room.back == defines.board_types.gate_right_left"><rect style="stroke-width: 1; fill: white;" ng-click="" ng-attr-x="{{0}}" ng-attr-y="{{scaled.K}}" ng-attr-width="{{scaled.K / 2}}" ng-attr-height="{{2.5}}"></rect><g ng-attr-transform="translate({{scaled.K / 2}}, 0)"><rect style="stroke: silver; fill: silver;" ng-click="" ng-attr-x="{{0}}" ng-attr-y="{{scaled.K / 2}}" ng-attr-width="{{2.5}}" ng-attr-height="{{scaled.K / 2}}"></rect><text style="" ng-attr-x="{{scaled.K / 4}}" ng-attr-y="{{scaled.K - 2}}">M</text><path ng-attr-d="M{{scaled.K / 2}},{{scaled.K}} Q{{scaled.K / 2}},{{scaled.K / 2}} {{0}},{{scaled.K / 2}}" stroke="silver" fill="none"></path></g></g><g ng-if="room.back == defines.board_types.gate_right_right"><rect style="stroke-width: 1; fill: white;" ng-click="" ng-attr-x="{{0}}" ng-attr-y="{{scaled.K}}" ng-attr-width="{{scaled.K / 2}}" ng-attr-height="{{2.5}}"></rect><rect style="stroke: silver; fill: silver;" ng-click="" ng-attr-x="{{scaled.K - 2.5}}" ng-attr-y="{{scaled.K / 2}}" ng-attr-width="{{2.5}}" ng-attr-height="{{scaled.K / 2}}"></rect><text style="" ng-attr-x="{{scaled.K / 4 * 3}}" ng-attr-y="{{scaled.K - 2}}">M</text><path ng-attr-d="M{{scaled.K / 2}},{{scaled.K}} Q{{scaled.K / 2}},{{scaled.K / 2}} {{scaled.K - 2.5}},{{scaled.K / 2}}" stroke="silver" fill="none"></path></g></g><g ng-attr-transform="rotate(-270 {{scaled.K / 2}}, {{scaled.K / 2}})"><g ng-if="room.left == defines.board_types.window"><rect style="stroke: silver; fill: silver;" ng-click="" ng-attr-x="{{0}}" ng-attr-y="{{scaled.K}}" ng-attr-width="{{scaled.K}}" ng-attr-height="{{2.5}}"></rect><text style="" ng-attr-x="{{scaled.K / 2}}" ng-attr-y="{{scaled.K - 2}}">C</text></g><g ng-if="room.left == defines.board_types.board"><rect style="stroke-width: 1; fill: white;" ng-click="" ng-attr-x="{{0}}" ng-attr-y="{{scaled.K}}" ng-attr-width="{{scaled.K}}" ng-attr-height="{{2.5}}"></rect></g><g ng-if="room.left == defines.board_types.gate_dual"><rect style="stroke: silver; fill: silver;" ng-click="" ng-attr-x="{{0}}" ng-attr-y="{{scaled.K / 2}}" ng-attr-width="{{2.5}}" ng-attr-height="{{scaled.K / 2}}"></rect><text style="" ng-attr-x="{{scaled.K / 4}}" ng-attr-y="{{scaled.K - 2}}">M</text><path ng-attr-d="M{{scaled.K / 2}},{{scaled.K}} Q{{scaled.K / 2}},{{scaled.K / 2}} {{0}},{{scaled.K / 2}}" stroke="silver" fill="none"></path><rect style="stroke: silver; fill: silver;" ng-click="" ng-attr-x="{{scaled.K - 2.5}}" ng-attr-y="{{scaled.K / 2}}" ng-attr-width="{{2.5}}" ng-attr-height="{{scaled.K / 2}}"></rect><text style="" ng-attr-x="{{scaled.K / 4 * 3}}" ng-attr-y="{{scaled.K - 2}}">M</text><path ng-attr-d="M{{scaled.K / 2}},{{scaled.K}} Q{{scaled.K / 2}},{{scaled.K / 2}} {{scaled.K - 2.5}},{{scaled.K / 2}}" stroke="silver" fill="none"></path></g><g ng-if="room.left == defines.board_types.gate_left_left"><rect style="stroke-width: 1; fill: white;" ng-click="" ng-attr-x="{{scaled.K / 2}}" ng-attr-y="{{scaled.K}}" ng-attr-width="{{scaled.K / 2}}" ng-attr-height="{{2.5}}"></rect><rect style="stroke: silver; fill: silver;" ng-click="" ng-attr-x="{{0}}" ng-attr-y="{{scaled.K / 2}}" ng-attr-width="{{2.5}}" ng-attr-height="{{scaled.K / 2}}"></rect><text style="" ng-attr-x="{{scaled.K / 4}}" ng-attr-y="{{scaled.K - 2}}">M</text><path ng-attr-d="M{{scaled.K / 2}},{{scaled.K}} Q{{scaled.K / 2}},{{scaled.K / 2}} {{0}},{{scaled.K / 2}}" stroke="silver" fill="none"></path></g><g ng-if="room.left == defines.board_types.gate_left_right"><rect style="stroke-width: 1; fill: white;" ng-click="" ng-attr-x="{{scaled.K / 2}}" ng-attr-y="{{scaled.K}}" ng-attr-width="{{scaled.K / 2}}" ng-attr-height="{{2.5}}"></rect><g ng-attr-transform="translate({{-scaled.K / 2}}, 0)"><rect style="stroke: silver; fill: silver;" ng-click="" ng-attr-x="{{scaled.K - 2.5}}" ng-attr-y="{{scaled.K / 2}}" ng-attr-width="{{2.5}}" ng-attr-height="{{scaled.K / 2}}"></rect><text style="" ng-attr-x="{{scaled.K / 4 * 3}}" ng-attr-y="{{scaled.K - 2}}">M</text><path ng-attr-d="M{{scaled.K / 2}},{{scaled.K}} Q{{scaled.K / 2}},{{scaled.K / 2}} {{scaled.K - 2.5}},{{scaled.K / 2}}" stroke="silver" fill="none"></path></g></g><g ng-if="room.left == defines.board_types.gate_right_left"><rect style="stroke-width: 1; fill: white;" ng-click="" ng-attr-x="{{0}}" ng-attr-y="{{scaled.K}}" ng-attr-width="{{scaled.K / 2}}" ng-attr-height="{{2.5}}"></rect><g ng-attr-transform="translate({{scaled.K / 2}}, 0)"><rect style="stroke: silver; fill: silver;" ng-click="" ng-attr-x="{{0}}" ng-attr-y="{{scaled.K / 2}}" ng-attr-width="{{2.5}}" ng-attr-height="{{scaled.K / 2}}"></rect><text style="" ng-attr-x="{{scaled.K / 4}}" ng-attr-y="{{scaled.K - 2}}">M</text><path ng-attr-d="M{{scaled.K / 2}},{{scaled.K}} Q{{scaled.K / 2}},{{scaled.K / 2}} {{0}},{{scaled.K / 2}}" stroke="silver" fill="none"></path></g></g><g ng-if="room.left == defines.board_types.gate_right_right"><rect style="stroke-width: 1; fill: white;" ng-click="" ng-attr-x="{{0}}" ng-attr-y="{{scaled.K}}" ng-attr-width="{{scaled.K / 2}}" ng-attr-height="{{2.5}}"></rect><rect style="stroke: silver; fill: silver;" ng-click="" ng-attr-x="{{scaled.K - 2.5}}" ng-attr-y="{{scaled.K / 2}}" ng-attr-width="{{2.5}}" ng-attr-height="{{scaled.K / 2}}"></rect><text style="" ng-attr-x="{{scaled.K / 4 * 3}}" ng-attr-y="{{scaled.K - 2}}">M</text><path ng-attr-d="M{{scaled.K / 2}},{{scaled.K}} Q{{scaled.K / 2}},{{scaled.K / 2}} {{scaled.K - 2.5}},{{scaled.K / 2}}" stroke="silver" fill="none"></path></g></g><g ng-attr-transform="translate(0, {{-scaled.K / 2}})"><g ng-if="room.middle == defines.board_types.window"><rect style="stroke: silver; fill: silver;" ng-click="" ng-attr-x="{{0}}" ng-attr-y="{{scaled.K}}" ng-attr-width="{{scaled.K}}" ng-attr-height="{{2.5}}"></rect><text style="" ng-attr-x="{{scaled.K / 2}}" ng-attr-y="{{scaled.K - 2}}">C</text></g><g ng-if="room.middle == defines.board_types.board"><rect style="stroke-width: 1; fill: white;" ng-click="" ng-attr-x="{{0}}" ng-attr-y="{{scaled.K}}" ng-attr-width="{{scaled.K}}" ng-attr-height="{{2.5}}"></rect></g><g ng-if="room.middle == defines.board_types.gate_dual"><rect style="stroke: silver; fill: silver;" ng-click="" ng-attr-x="{{0}}" ng-attr-y="{{scaled.K / 2}}" ng-attr-width="{{2.5}}" ng-attr-height="{{scaled.K / 2}}"></rect><text style="" ng-attr-x="{{scaled.K / 4}}" ng-attr-y="{{scaled.K - 2}}">M</text><path ng-attr-d="M{{scaled.K / 2}},{{scaled.K}} Q{{scaled.K / 2}},{{scaled.K / 2}} {{0}},{{scaled.K / 2}}" stroke="silver" fill="none"></path><rect style="stroke: silver; fill: silver;" ng-click="" ng-attr-x="{{scaled.K - 2.5}}" ng-attr-y="{{scaled.K / 2}}" ng-attr-width="{{2.5}}" ng-attr-height="{{scaled.K / 2}}"></rect><text style="" ng-attr-x="{{scaled.K / 4 * 3}}" ng-attr-y="{{scaled.K - 2}}">M</text><path ng-attr-d="M{{scaled.K / 2}},{{scaled.K}} Q{{scaled.K / 2}},{{scaled.K / 2}} {{scaled.K - 2.5}},{{scaled.K / 2}}" stroke="silver" fill="none"></path></g><g ng-if="room.middle == defines.board_types.gate_left_left"><rect style="stroke-width: 1; fill: white;" ng-click="" ng-attr-x="{{scaled.K / 2}}" ng-attr-y="{{scaled.K}}" ng-attr-width="{{scaled.K / 2}}" ng-attr-height="{{2.5}}"></rect><rect style="stroke: silver; fill: silver;" ng-click="" ng-attr-x="{{0}}" ng-attr-y="{{scaled.K / 2}}" ng-attr-width="{{2.5}}" ng-attr-height="{{scaled.K / 2}}"></rect><text style="" ng-attr-x="{{scaled.K / 4}}" ng-attr-y="{{scaled.K - 2}}">M</text><path ng-attr-d="M{{scaled.K / 2}},{{scaled.K}} Q{{scaled.K / 2}},{{scaled.K / 2}} {{0}},{{scaled.K / 2}}" stroke="silver" fill="none"></path></g><g ng-if="room.middle == defines.board_types.gate_left_right"><rect style="stroke-width: 1; fill: white;" ng-click="" ng-attr-x="{{scaled.K / 2}}" ng-attr-y="{{scaled.K}}" ng-attr-width="{{scaled.K / 2}}" ng-attr-height="{{2.5}}"></rect><g ng-attr-transform="translate({{-scaled.K / 2}}, 0)"><rect style="stroke: silver; fill: silver;" ng-click="" ng-attr-x="{{scaled.K - 2.5}}" ng-attr-y="{{scaled.K / 2}}" ng-attr-width="{{2.5}}" ng-attr-height="{{scaled.K / 2}}"></rect><text style="" ng-attr-x="{{scaled.K / 4 * 3}}" ng-attr-y="{{scaled.K - 2}}">M</text><path ng-attr-d="M{{scaled.K / 2}},{{scaled.K}} Q{{scaled.K / 2}},{{scaled.K / 2}} {{scaled.K - 2.5}},{{scaled.K / 2}}" stroke="silver" fill="none"></path></g></g><g ng-if="room.middle == defines.board_types.gate_right_left"><rect style="stroke-width: 1; fill: white;" ng-click="" ng-attr-x="{{0}}" ng-attr-y="{{scaled.K}}" ng-attr-width="{{scaled.K / 2}}" ng-attr-height="{{2.5}}"></rect><g ng-attr-transform="translate({{scaled.K / 2}}, 0)"><rect style="stroke: silver; fill: silver;" ng-click="" ng-attr-x="{{0}}" ng-attr-y="{{scaled.K / 2}}" ng-attr-width="{{2.5}}" ng-attr-height="{{scaled.K / 2}}"></rect><text style="" ng-attr-x="{{scaled.K / 4}}" ng-attr-y="{{scaled.K - 2}}">M</text><path ng-attr-d="M{{scaled.K / 2}},{{scaled.K}} Q{{scaled.K / 2}},{{scaled.K / 2}} {{0}},{{scaled.K / 2}}" stroke="silver" fill="none"></path></g></g><g ng-if="room.middle == defines.board_types.gate_right_right"><rect style="stroke-width: 1; fill: white;" ng-click="" ng-attr-x="{{0}}" ng-attr-y="{{scaled.K}}" ng-attr-width="{{scaled.K / 2}}" ng-attr-height="{{2.5}}"></rect><rect style="stroke: silver; fill: silver;" ng-click="" ng-attr-x="{{scaled.K - 2.5}}" ng-attr-y="{{scaled.K / 2}}" ng-attr-width="{{2.5}}" ng-attr-height="{{scaled.K / 2}}"></rect><text style="" ng-attr-x="{{scaled.K / 4 * 3}}" ng-attr-y="{{scaled.K - 2}}">M</text><path ng-attr-d="M{{scaled.K / 2}},{{scaled.K}} Q{{scaled.K / 2}},{{scaled.K / 2}} {{scaled.K - 2.5}},{{scaled.K / 2}}" stroke="silver" fill="none"></path></g></g></g></g><!-- 走廊--><g ng-attr-transform="translate(0, {{scaled.height}})"><line style="stroke-width: 3; stroke: gray;" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{scaled.aisle_width}}" ng-attr-x2="{{scaled.width}}" ng-attr-y2="{{scaled.aisle_width}}"></line><line style="stroke-width: 3; stroke: gray;" ng-if="!metadata.options.stairs.left" ng-attr-x1="{{0}}" ng-attr-y1="{{0}}" ng-attr-x2="{{0}}" ng-attr-y2="{{scaled.aisle_width}}"></line><line style="stroke-width: 3; stroke: gray;" ng-if="!metadata.options.stairs.right" ng-attr-x1="{{scaled.width}}" ng-attr-y1="{{0}}" ng-attr-x2="{{scaled.width}}" ng-attr-y2="{{scaled.aisle_width}}"></line></g><!-- 横向标尺--><g ng-attr-transform="translate(0, {{scaled.height + scaled.aisle_width + 20}})"><g ng-attr-transform="translate({{-metadata.scale * 80}}, 0)"><g transform=""><line style="" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{0}}" ng-attr-x2="{{0}}" ng-attr-y2="{{40}}"></line><line style="" ng-if="true" ng-attr-x1="{{(scaled.K*rooms.length+metadata.scale*160)}}" ng-attr-y1="{{0}}" ng-attr-x2="{{(scaled.K*rooms.length+metadata.scale*160)}}" ng-attr-y2="{{40}}"></line><line style="" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{40-6}}" ng-attr-x2="{{(scaled.K*rooms.length+metadata.scale*160)}}" ng-attr-y2="{{40-6}}"></line><text style="text-anchor: middle;" ng-attr-x="{{(scaled.K*rooms.length+metadata.scale*160)/2}}" ng-attr-y="{{40-8}}">{{defines.K*rooms.length+160}}</text></g></g><text x="-6" y="0">80</text><text ng-attr-x="{{scaled.K*rooms.length-3}}" y="0">80</text><g ng-repeat="i in _.range(rooms.length)" ng-attr-transform="translate({{scaled.K * $index}}, 0)"><g transform=""><line style="" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{0}}" ng-attr-x2="{{0}}" ng-attr-y2="{{20}}"></line><line style="" ng-if="true" ng-attr-x1="{{(scaled.K)}}" ng-attr-y1="{{0}}" ng-attr-x2="{{(scaled.K)}}" ng-attr-y2="{{20}}"></line><line style="" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{20-6}}" ng-attr-x2="{{(scaled.K)}}" ng-attr-y2="{{20-6}}"></line><text style="text-anchor: middle;" ng-attr-x="{{(scaled.K)/2}}" ng-attr-y="{{20-8}}">{{defines.K}}</text></g><g transform="translate(0, 60)"><line x1="0" y1="-10" x2="0" y2="-40"></line><circle cx="0" cy="0" r="8" fill="transparent" stroke="black"></circle><text x="-3" y="3">{{$index + 1}}</text><g ng-attr-transform="translate({{scaled.K}}, 0)" ng-if="$last"><line x1="0" y1="-10" x2="0" y2="-40"></line><circle cx="0" cy="0" r="8" fill="transparent" stroke="black"></circle><text x="-3" y="3">{{$index + 2}}</text></g></g></g></g></g></g>