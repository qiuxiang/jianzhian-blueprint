<svg ng-attr-width="{{defines.blueprint.width}}" height="600" class="blueprint"><marker id="ArrowMend" overflow="visible" orient="auto"><path id="ArrowPath" d="M 0.0,0.0 L 5.0,-5.0 L -12.5,0.0 L 5.0,5.0 L 0.0,0.0 Z" transform="scale(0.4) rotate(180) translate(10, 0)"></path></marker><pattern id="StairsPattern" width="0.1" height="0.1"><line x1="0" y1="0" x2="10" y2="0"></line></pattern><pattern id="RailingPattern" width="100" ng-attr-height="{{metadata.scale * 312}}" patternUnits="userSpaceOnUse"><line x1="0" y1="0" x2="100" y2="0" stroke-width="5"></line></pattern><pattern id="RoofPattern" ng-attr-width="{{metadata.scale * 310}}" height="100" patternUnits="userSpaceOnUse"><line x1="0" y1="0" x2="0" y2="100" stroke-width="5"></line></pattern><g transform="translate(20, 30)"><line x1="-40" ng-attr-y1="{{scaled.layer}}" ng-attr-x2="{{scaled.height + 150}}" ng-attr-y2="{{scaled.layer}}"></line><!-- 房顶--><g><line ng-attr-x1="{{-metadata.scale * 300}}" y1="0" ng-attr-x2="{{scaled.height / 2}}" ng-attr-y2="{{-metadata.scale * 500}}"></line><line ng-attr-x1="{{scaled.height / 2}}" ng-attr-y1="{{-metadata.scale * 500}}" ng-attr-x2="{{scaled.height + metadata.scale * 300}}" y2="0"></line><line ng-attr-x1="{{-metadata.scale * 300}}" ng-attr-y1="{{-metadata.scale * 100}}" ng-attr-x2="{{scaled.height / 2}}" ng-attr-y2="{{-metadata.scale * 600}}"></line><line ng-attr-x1="{{scaled.height / 2}}" ng-attr-y1="{{-metadata.scale * 600}}" ng-attr-x2="{{scaled.height + metadata.scale * 300}}" ng-attr-y2="{{-metadata.scale * 100}}"></line><line ng-attr-x1="{{-metadata.scale * 300}}" ng-attr-y1="{{-metadata.scale * 100}}" ng-attr-x2="{{-metadata.scale * 300}}" y2="0"></line><line ng-attr-x1="{{scaled.height + metadata.scale * 300}}" ng-attr-y1="{{-metadata.scale * 100}}" ng-attr-x2="{{scaled.height + metadata.scale * 300}}" y2="0"></line></g><!-- 屋檐--><g ng-attr-transform="translate({{scaled.height}}, 0)"><line x1="3" y1="0" ng-attr-x2="{{scaled.aisle_width}}" ng-attr-y2="{{metadata.scale * 200}}" class="border"></line><line x1="3" ng-attr-y1="{{metadata.scale * 200}}" ng-attr-x2="{{scaled.aisle_width}}" ng-attr-y2="{{metadata.scale * 200}}" class="border"></line></g><!-- 走廊--><g ng-if="metadata.layer &gt; 3" ng-attr-transform="translate({{scaled.height}}, {{scaled.P * 3 - 1200 * metadata.scale}})"><line x1="4" y1="0" ng-attr-x2="{{scaled.aisle_width}}" y2="0" class="border"></line><line x1="4" ng-attr-y1="{{metadata.scale * 300}}" ng-attr-x2="{{scaled.aisle_width}}" ng-attr-y2="{{metadata.scale * 300}}" class="border"></line><line x1="4" ng-attr-y1="{{metadata.scale * 600}}" ng-attr-x2="{{scaled.aisle_width}}" ng-attr-y2="{{metadata.scale * 600}}" class="border"></line><line x1="4" ng-attr-y1="{{metadata.scale * 900}}" ng-attr-x2="{{scaled.aisle_width}}" ng-attr-y2="{{metadata.scale * 900}}" class="border"></line><line x1="4" ng-attr-y1="{{metadata.scale * 1200}}" ng-attr-x2="{{scaled.aisle_width}}" ng-attr-y2="{{metadata.scale * 1200}}" class="border"></line><line ng-attr-x1="{{scaled.aisle_width}}" y1="0" ng-attr-x2="{{scaled.aisle_width}}" ng-attr-y2="{{scaled.layer - scaled.P * 3 + 1200 * metadata.scale}}" class="border"></line></g><!-- 楼梯--><g ng-if="metadata.options.stairs.left" ng-attr-transform="translate({{scaled.height - 3200 * metadata.scale}}, {{scaled.P * 3 - 1200 * metadata.scale}})"><line x1="0" ng-attr-y1="{{scaled.P * 3 + 1200 * metadata.scale}}" ng-attr-x2="{{3200* metadata.scale + 4}}" ng-attr-y2="{{1200 * metadata.scale}}" class="border"></line><line x1="0" ng-attr-y1="{{scaled.P * 3 + 900 * metadata.scale}}" ng-attr-x2="{{3200* metadata.scale + 4}}" ng-attr-y2="{{900 * metadata.scale}}" class="border"></line><line x1="0" ng-attr-y1="{{scaled.P * 3 + 600 * metadata.scale}}" ng-attr-x2="{{3200* metadata.scale + 4}}" ng-attr-y2="{{600 * metadata.scale}}" class="border"></line><line x1="0" ng-attr-y1="{{scaled.P * 3 + 300 * metadata.scale}}" ng-attr-x2="{{3200* metadata.scale + 4}}" ng-attr-y2="{{300 * metadata.scale}}" class="border"></line><line x1="0" ng-attr-y1="{{scaled.P * 3}}" ng-attr-x2="{{3200* metadata.scale + 4}}" y2="0" class="border"></line><line x1="0" ng-attr-y1="{{scaled.P * 3 + 1200 * metadata.scale}}" x2="0" ng-attr-y2="{{scaled.P * 3}}" class="border"></line><line ng-attr-x1="{{800 * metadata.scale}}" ng-attr-y1="{{scaled.P * 3 * 0.75 + 1200 * metadata.scale}}" ng-attr-x2="{{800 * metadata.scale}}" ng-attr-y2="{{scaled.P * 3 * 0.75}}" class="border"></line><line ng-attr-x1="{{1600 * metadata.scale}}" ng-attr-y1="{{scaled.P * 3 * 0.5 + 1200 * metadata.scale + 1}}" ng-attr-x2="{{1600 * metadata.scale}}" ng-attr-y2="{{scaled.P * 3 * 0.5 + 1}}" class="border"></line><line ng-attr-x1="{{2400 * metadata.scale}}" ng-attr-y1="{{scaled.P * 3 * 0.25 + 1200 * metadata.scale + 2}}" ng-attr-x2="{{2400 * metadata.scale}}" ng-attr-y2="{{scaled.P * 3 * 0.25 + 2}}" class="border"></line></g><g ng-repeat="layer in metadata.rooms" ng-attr-transform="translate(0, {{scaled.P * $index * 3}})"><g ng-repeat="i in _.range(metadata.height)" ng-attr-transform="translate({{scaled.K * $index}}, 0)"><line x1="0" y1="0" x2="0" ng-attr-y2="{{scaled.P * 3}}"></line><line x1="3" y1="0" x2="3" ng-attr-y2="{{scaled.P * 3}}"></line><line x1="4" ng-attr-y1="{{scaled.P * 0.5}}" ng-attr-x2="{{scaled.K}}" ng-attr-y2="{{scaled.P * 2.5}}"></line><line x1="4" ng-attr-y1="{{scaled.P * 2.5}}" ng-attr-x2="{{scaled.K}}" ng-attr-y2="{{scaled.P * 0.5}}"></line><line ng-if="$last" ng-attr-x1="{{scaled.K}}" y1="0" ng-attr-x2="{{scaled.K}}" ng-attr-y2="{{scaled.P * 3}}"></line><line ng-if="$last" ng-attr-x1="{{scaled.K + 3}}" y1="0" ng-attr-x2="{{scaled.K + 3}}" ng-attr-y2="{{scaled.P * 3}}"></line></g><!-- 深度为3K时的房顶柱--><g ng-if="metadata.height == 3 &amp;&amp; $first"><line x1="0" y1="0" x2="0" ng-attr-y2="{{-metadata.scale * 30}}"></line><line x1="3" y1="0" x2="3" ng-attr-y2="{{-metadata.scale * 50}}"></line><line ng-attr-x1="{{scaled.K}}" y1="0" ng-attr-x2="{{scaled.K}}" ng-attr-y2="{{-metadata.scale * 330}}"></line><line ng-attr-x1="{{scaled.K + 3}}" y1="0" ng-attr-x2="{{scaled.K + 3}}" ng-attr-y2="{{-metadata.scale * 350}}"></line><line ng-attr-x1="{{scaled.K * 2}}" y1="0" ng-attr-x2="{{scaled.K * 2}}" ng-attr-y2="{{-metadata.scale * 330}}"></line><line ng-attr-x1="{{scaled.K * 2 + 3}}" y1="0" ng-attr-x2="{{scaled.K * 2 + 3}}" ng-attr-y2="{{-metadata.scale * 350}}"></line><line ng-attr-x1="{{scaled.K * 3 + 3}}" y1="0" ng-attr-x2="{{scaled.K * 3 + 3}}" ng-attr-y2="{{-metadata.scale * 30}}"></line><line ng-attr-x1="{{scaled.K * 3}}" y1="0" ng-attr-x2="{{scaled.K * 3}}" ng-attr-y2="{{-metadata.scale * 50}}"></line></g><!-- 深度为4K时的房顶柱--><g ng-if="metadata.height == 4 &amp;&amp; $first"><line x1="0" y1="0" x2="0" ng-attr-y2="{{-metadata.scale * 30}}"></line><line x1="3" y1="0" x2="3" ng-attr-y2="{{-metadata.scale * 40}}"></line><line ng-attr-x1="{{scaled.K}}" y1="0" ng-attr-x2="{{scaled.K}}" ng-attr-y2="{{-metadata.scale * 260}}"></line><line ng-attr-x1="{{scaled.K + 3}}" y1="0" ng-attr-x2="{{scaled.K + 3}}" ng-attr-y2="{{-metadata.scale * 270}}"></line><line ng-attr-x1="{{scaled.K * 2}}" y1="0" ng-attr-x2="{{scaled.K * 2}}" ng-attr-y2="{{-metadata.scale * 500}}"></line><line ng-attr-x1="{{scaled.K * 2 + 3}}" y1="0" ng-attr-x2="{{scaled.K * 2 + 3}}" ng-attr-y2="{{-metadata.scale * 500}}"></line><line ng-attr-x1="{{scaled.K * 3 + 3}}" y1="0" ng-attr-x2="{{scaled.K * 3 + 3}}" ng-attr-y2="{{-metadata.scale * 260}}"></line><line ng-attr-x1="{{scaled.K * 3}}" y1="0" ng-attr-x2="{{scaled.K * 3}}" ng-attr-y2="{{-metadata.scale * 270}}"></line><line ng-attr-x1="{{scaled.K * 4 + 3}}" y1="0" ng-attr-x2="{{scaled.K * 4 + 3}}" ng-attr-y2="{{-metadata.scale * 30}}"></line><line ng-attr-x1="{{scaled.K * 4}}" y1="0" ng-attr-x2="{{scaled.K * 4}}" ng-attr-y2="{{-metadata.scale * 40}}"></line></g></g><!-- 标尺--><g ng-attr-transform="translate(0, {{scaled.layer + 20}})"><line x1="0" y1="10" ng-attr-x2="{{scaled.height}}" y2="10"></line><line x1="-4" y1="30" ng-attr-x2="{{scaled.height + 4}}" y2="30"></line><line x1="-4" y1="0" x2="-4" y2="35"></line><line ng-attr-x1="{{scaled.height + 4}}" y1="0" ng-attr-x2="{{scaled.height + 4}}" y2="35"></line><text text-anchor="middle" ng-attr-x="{{scaled.height / 2}}" y="28">{{defines.K * metadata.height + 160}}</text><text x="-8">80</text><text ng-attr-x="{{scaled.height - 2}}">80</text><g ng-attr-transform="translate({{scaled.height}}, 0)"><line x1="4" y1="10" ng-attr-x2="{{scaled.aisle_width}}" y2="10"></line><line ng-attr-x1="{{scaled.aisle_width}}" y1="0" ng-attr-x2="{{scaled.aisle_width}}" y2="20"></line><text ng-attr-x="{{scaled.aisle_width / 2}}" y="8" text-anchor="middle">{{defines.aisle_width}}</text></g><g ng-repeat="i in _.range(metadata.height)" ng-attr-transform="translate({{scaled.K * $index}}, 0)"><line x1="0" y1="0" x2="0" y2="40"></line><line ng-if="$last" ng-attr-x1="{{scaled.K}}" y1="0" ng-attr-x2="{{scaled.K}}" y2="40"></line><text ng-attr-x="{{scaled.K / 2}}" y="8" text-anchor="middle">{{$parent.defines.K}}</text><g transform="translate(0, 50)"><circle cx="0" cy="0" r="8" fill="transparent" stroke="black"></circle><text x="-3" y="3">{{metadata.height - $index|letter}}</text></g><g ng-attr-transform="translate({{$parent.scaled.K}}, 50)" ng-if="$last"><circle cx="0" cy="0" r="8" fill="transparent" stroke="black"></circle><text x="-4" y="3">A</text></g></g></g></g></svg>