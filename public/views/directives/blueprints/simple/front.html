<!-- 护栏--><!-- 一个标尺--><!-- 一组标尺--><svg ng-attr-width="{{defines.blueprint.width}}" height="600" class="blueprint"><marker id="ArrowMend" overflow="visible" orient="auto"><path id="ArrowPath" d="M 0.0,0.0 L 5.0,-5.0 L -12.5,0.0 L 5.0,5.0 L 0.0,0.0 Z" transform="scale(0.4) rotate(180) translate(10, 0)"></path></marker><pattern id="StairsPattern" width="100" ng-attr-height="{{scaled.aisle_height / 6}}" patternUnits="userSpaceOnUse"><line x1="0" y1="0" x2="100" y2="0" stroke="sliver"></line></pattern><pattern id="RailingPattern" width="100" ng-attr-height="{{(scaled.aisle_height + 1) / 4}}" patternUnits="userSpaceOnUse"><line x1="0" y1="0" x2="100" y2="0" stroke-width="5"></line></pattern><pattern id="RoofPattern" ng-attr-width="{{metadata.scale * 310}}" height="100" patternUnits="userSpaceOnUse"><line x1="0" y1="0" x2="0" y2="100" stroke-width="5"></line></pattern><!-- 护栏--><!-- 一个标尺--><!-- 一组标尺--><g ng-attr-transform="translate({{scaled.aisle_width * (1 + (metadata.layer &gt; 6)) * metadata.options.stairs.left + 10}}, 30)"><g ng-repeat="layer in metadata.rooms" ng-attr-transform="translate(0, {{scaled.P * (metadata.layer / 3 - $index - 1) * 3}})"><g fill="transparent" ng-repeat="room in layer" ng-attr-transform="translate({{scaled.K * $index}}, 0)"><g ng-if="room[metadata.height - 1].front == defines.board_types.window"><rect style="stroke-width: 3; stroke: gray;" ng-if="true" ng-click="" ng-attr-x="{{0}}" ng-attr-y="{{scaled.P}}" ng-attr-width="{{scaled.K / 2}}" ng-attr-height="{{scaled.P}}"></rect><rect style="stroke-width: 3; stroke: gray;" ng-if="true" ng-click="" ng-attr-x="{{scaled.K / 2}}" ng-attr-y="{{scaled.P}}" ng-attr-width="{{scaled.K / 2}}" ng-attr-height="{{scaled.P}}"></rect><line style="stroke-width: 3; stroke: gray;" ng-if="true" ng-attr-x1="{{scaled.K * 0.2}}" ng-attr-y1="{{scaled.P * 1.6}}" ng-attr-x2="{{scaled.K * 0.3}}" ng-attr-y2="{{scaled.P * 1.4}}"></line><line style="stroke-width: 3; stroke: gray;" ng-if="true" ng-attr-x1="{{scaled.K * 0.7}}" ng-attr-y1="{{scaled.P * 1.6}}" ng-attr-x2="{{scaled.K * 0.8}}" ng-attr-y2="{{scaled.P * 1.4}}"></line><line style="stroke: gray;" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{scaled.P * 0.5}}" ng-attr-x2="{{scaled.K}}" ng-attr-y2="{{scaled.P * 2.5}}"></line><line style="stroke: gray;" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{scaled.P * 2.5}}" ng-attr-x2="{{scaled.K}}" ng-attr-y2="{{scaled.P * 0.5}}"></line></g><g ng-if="room[metadata.height - 1].front == defines.board_types.gate_right_right"><line style="" ng-if="true" ng-attr-x1="{{scaled.K / 2}}" ng-attr-y1="{{0}}" ng-attr-x2="{{scaled.K / 2}}" ng-attr-y2="{{scaled.P * 3}}"></line><line style="stroke: gray;" ng-if="true" ng-attr-x1="{{scaled.K / 2}}" ng-attr-y1="{{metadata.scale * 800}}" ng-attr-x2="{{scaled.K}}" ng-attr-y2="{{metadata.scale * 800}}"></line><circle ng-attr-cx="{{scaled.K * 0.6}}" ng-attr-cy="{{scaled.P * 1.9}}" r="2" stroke="gray"></circle><line style="stroke: gray;" ng-if="true" ng-attr-x1="{{scaled.K * 0.66}}" ng-attr-y1="{{scaled.P * 1.8}}" ng-attr-x2="{{scaled.K * 0.66}}" ng-attr-y2="{{scaled.P * 2.1}}"></line></g><g ng-if="room.front == defines.board_types.board"><line style="" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{scaled.P * 0.5}}" ng-attr-x2="{{scaled.K}}" ng-attr-y2="{{scaled.P * 2.5}}"></line><line style="" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{scaled.P * 2.5}}" ng-attr-x2="{{scaled.K}}" ng-attr-y2="{{scaled.P * 0.5}}"></line></g><rect style="" ng-if="true" ng-click="" ng-attr-x="{{0}}" ng-attr-y="{{0}}" ng-attr-width="{{scaled.K}}" ng-attr-height="{{scaled.P * 3}}"></rect></g><!-- 走廊--><g ng-if="!$first"><rect fill="url(#RailingPattern)" ng-attr-x="{{-((($index + 1) * 3 != metadata.layer &amp;&amp; metadata.layer &gt; 6) + 1) * metadata.options.stairs.left * scaled.aisle_width}}" ng-attr-y="{{scaled.P * 3 - scaled.aisle_height}}" ng-attr-width="{{scaled.width + (metadata.options.stairs.left + metadata.options.stairs.right + (($index + 1) * 3 != metadata.layer &amp;&amp; metadata.layer &gt; 6 &amp;&amp; metadata.options.stairs.right) + (($index + 1) * 3 != metadata.layer &amp;&amp; metadata.layer &gt; 6 &amp;&amp; metadata.options.stairs.left)) * scaled.aisle_width}}" ng-attr-height="{{scaled.aisle_height}}"></rect></g><!-- 两层以上--><g ng-if="metadata.layer &gt; 6"><g ng-if="!$last"><!-- 左楼梯--><g ng-if="metadata.options.stairs.left" ng-attr-transform="translate({{-scaled.aisle_width * 2}}, 0)"><rect style="fill: url(#StairsPattern);" ng-if="true" ng-click="" ng-attr-x="{{scaled.aisle_width}}" ng-attr-y="{{0}}" ng-attr-width="{{scaled.aisle_width}}" ng-attr-height="{{scaled.P * 1.5}}"></rect><rect style="fill: url(#StairsPattern);" ng-if="true" ng-click="" ng-attr-x="{{0}}" ng-attr-y="{{scaled.P * 1.5}}" ng-attr-width="{{scaled.aisle_width}}" ng-attr-height="{{scaled.P * 1.5}}"></rect><!-- 栏杆--><line style="stroke-width: 3;" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{scaled.P * 1.5 - scaled.aisle_height}}" ng-attr-x2="{{scaled.aisle_width}}" ng-attr-y2="{{scaled.P * 1.5 - scaled.aisle_height}}"></line><line style="stroke-width: 3;" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{scaled.P * 1.5 - scaled.aisle_height * 0.25}}" ng-attr-x2="{{scaled.aisle_width}}" ng-attr-y2="{{scaled.P * 1.5 - scaled.aisle_height * 0.25}}"></line><line style="stroke-width: 3;" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{scaled.P * 1.5 - scaled.aisle_height * 0.5}}" ng-attr-x2="{{scaled.aisle_width}}" ng-attr-y2="{{scaled.P * 1.5 - scaled.aisle_height * 0.5}}"></line><line style="stroke-width: 3;" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{scaled.P * 1.5 - scaled.aisle_height * 0.75}}" ng-attr-x2="{{scaled.aisle_width}}" ng-attr-y2="{{scaled.P * 1.5 - scaled.aisle_height * 0.75}}"></line></g><!-- 右楼梯--><g ng-if="metadata.options.stairs.right" ng-attr-transform="translate({{scaled.width}}, 0)"><rect style="fill: url(#StairsPattern);" ng-if="true" ng-click="" ng-attr-x="{{0}}" ng-attr-y="{{0}}" ng-attr-width="{{scaled.aisle_width}}" ng-attr-height="{{scaled.P * 1.5}}"></rect><rect style="fill: url(#StairsPattern);" ng-if="true" ng-click="" ng-attr-x="{{scaled.aisle_width}}" ng-attr-y="{{scaled.P * 1.5}}" ng-attr-width="{{scaled.aisle_width}}" ng-attr-height="{{scaled.P * 1.5}}"></rect><!-- 栏杆--><line style="stroke-width: 3;" ng-if="true" ng-attr-x1="{{scaled.aisle_width}}" ng-attr-y1="{{scaled.P * 1.5 - scaled.aisle_height}}" ng-attr-x2="{{scaled.aisle_width * 2}}" ng-attr-y2="{{scaled.P * 1.5 - scaled.aisle_height}}"></line><line style="stroke-width: 3;" ng-if="true" ng-attr-x1="{{scaled.aisle_width}}" ng-attr-y1="{{scaled.P * 1.5 - scaled.aisle_height * 0.25}}" ng-attr-x2="{{scaled.aisle_width * 2}}" ng-attr-y2="{{scaled.P * 1.5 - scaled.aisle_height * 0.25}}"></line><line style="stroke-width: 3;" ng-if="true" ng-attr-x1="{{scaled.aisle_width}}" ng-attr-y1="{{scaled.P * 1.5 - scaled.aisle_height * 0.5}}" ng-attr-x2="{{scaled.aisle_width * 2}}" ng-attr-y2="{{scaled.P * 1.5 - scaled.aisle_height * 0.5}}"></line><line style="stroke-width: 3;" ng-if="true" ng-attr-x1="{{scaled.aisle_width}}" ng-attr-y1="{{scaled.P * 1.5 - scaled.aisle_height * 0.75}}" ng-attr-x2="{{scaled.aisle_width * 2}}" ng-attr-y2="{{scaled.P * 1.5 - scaled.aisle_height * 0.75}}"></line></g></g></g></g><!-- 房顶、屋檐--><rect style="fill: url(#RoofPattern);" ng-if="true" ng-click="" ng-attr-x="{{-metadata.scale * 200}}" ng-attr-y="{{-metadata.scale * 600}}" ng-attr-width="{{scaled.width + metadata.scale * 400}}" ng-attr-height="{{metadata.scale * 600}}"></rect><rect style="fill: url(#RoofPattern);" ng-if="true" ng-click="" ng-attr-x="{{0}}" ng-attr-y="{{0}}" ng-attr-width="{{scaled.width}}" ng-attr-height="{{metadata.scale * 200}}"></rect><!-- 左楼梯--><g ng-if="metadata.options.stairs.left" ng-attr-transform="translate({{-scaled.aisle_width}}, {{scaled.P * 3}})"><line style="" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{-scaled.aisle_height}}" ng-attr-x2="{{0}}" ng-attr-y2="{{scaled.layer - scaled.P * 3}}"></line><rect style="fill: url(#StairsPattern);" ng-if="metadata.layer == 6" ng-click="" ng-attr-x="{{0}}" ng-attr-y="{{0}}" ng-attr-width="{{scaled.aisle_width}}" ng-attr-height="{{scaled.layer - scaled.P * 3}}"></rect><g ng-attr-transform="translate(0, {{scaled.layer - scaled.P * 3 + 20}})"><g ng-attr-transform=""><line style="" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{0}}" ng-attr-x2="{{0}}" ng-attr-y2="{{20}}"></line><line style="" ng-if="true" ng-attr-x1="{{(scaled.aisle_width - metadata.scale * 80)}}" ng-attr-y1="{{0}}" ng-attr-x2="{{(scaled.aisle_width - metadata.scale * 80)}}" ng-attr-y2="{{20}}"></line><line style="" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{20-6}}" ng-attr-x2="{{(scaled.aisle_width - metadata.scale * 80)}}" ng-attr-y2="{{20-6}}"></line><text style="text-anchor: middle;" ng-attr-x="{{(scaled.aisle_width - metadata.scale * 80)/2}}" ng-attr-y="{{20-10}}">{{defines.aisle_width}}</text></g></g><g ng-if="metadata.layer &gt; 6"><g ng-attr-transform="translate({{-scaled.aisle_width + metadata.scale * 80}}, {{scaled.layer - scaled.P * 3 + 20}})"><g ng-attr-transform=""><line style="" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{0}}" ng-attr-x2="{{0}}" ng-attr-y2="{{20}}"></line><line style="" ng-if="true" ng-attr-x1="{{(scaled.aisle_width - metadata.scale * 80)}}" ng-attr-y1="{{0}}" ng-attr-x2="{{(scaled.aisle_width - metadata.scale * 80)}}" ng-attr-y2="{{20}}"></line><line style="" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{20-6}}" ng-attr-x2="{{(scaled.aisle_width - metadata.scale * 80)}}" ng-attr-y2="{{20-6}}"></line><text style="text-anchor: middle;" ng-attr-x="{{(scaled.aisle_width - metadata.scale * 80)/2}}" ng-attr-y="{{20-10}}">{{defines.aisle_width}}</text></g></g><line style="" ng-if="true" ng-attr-x1="{{-scaled.aisle_width}}" ng-attr-y1="{{scaled.P * 1.5 - scaled.aisle_height}}" ng-attr-x2="{{-scaled.aisle_width}}" ng-attr-y2="{{scaled.layer - scaled.P * 3}}"></line></g></g><!-- 右楼梯--><g ng-if="metadata.options.stairs.right" ng-attr-transform="translate({{scaled.width}}, {{scaled.P * 3}})"><line style="" ng-if="true" ng-attr-x1="{{scaled.aisle_width}}" ng-attr-y1="{{-scaled.aisle_height}}" ng-attr-x2="{{scaled.aisle_width}}" ng-attr-y2="{{scaled.layer - scaled.P * 3}}"></line><rect style="fill: url(#StairsPattern);" ng-if="metadata.layer == 6" ng-click="" ng-attr-x="{{0}}" ng-attr-y="{{0}}" ng-attr-width="{{scaled.aisle_width}}" ng-attr-height="{{scaled.layer - scaled.P * 3}}"></rect><g ng-attr-transform="translate(0, {{scaled.layer - scaled.P * 3 + 20}})"><g ng-attr-transform=""><line style="" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{0}}" ng-attr-x2="{{0}}" ng-attr-y2="{{20}}"></line><line style="" ng-if="true" ng-attr-x1="{{(scaled.aisle_width)}}" ng-attr-y1="{{0}}" ng-attr-x2="{{(scaled.aisle_width)}}" ng-attr-y2="{{20}}"></line><line style="" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{20-6}}" ng-attr-x2="{{(scaled.aisle_width)}}" ng-attr-y2="{{20-6}}"></line><text style="text-anchor: middle;" ng-attr-x="{{(scaled.aisle_width)/2}}" ng-attr-y="{{20-10}}">{{defines.aisle_width}}</text></g></g><g ng-if="metadata.layer &gt; 6"><g ng-attr-transform="translate({{scaled.aisle_width}}, {{scaled.layer - scaled.P * 3 + 20}})"><g ng-attr-transform=""><line style="" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{0}}" ng-attr-x2="{{0}}" ng-attr-y2="{{20}}"></line><line style="" ng-if="true" ng-attr-x1="{{(scaled.aisle_width)}}" ng-attr-y1="{{0}}" ng-attr-x2="{{(scaled.aisle_width)}}" ng-attr-y2="{{20}}"></line><line style="" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{20-6}}" ng-attr-x2="{{(scaled.aisle_width)}}" ng-attr-y2="{{20-6}}"></line><text style="text-anchor: middle;" ng-attr-x="{{(scaled.aisle_width)/2}}" ng-attr-y="{{20-10}}">{{defines.aisle_width}}</text></g></g><line style="" ng-if="true" ng-attr-x1="{{scaled.aisle_width * 2}}" ng-attr-y1="{{scaled.P * 1.5 - scaled.aisle_height}}" ng-attr-x2="{{scaled.aisle_width * 2}}" ng-attr-y2="{{scaled.layer - scaled.P * 3}}"></line></g></g><!-- 前置左楼梯--><g ng-attr-transform="translate(0, {{scaled.P * 3 - scaled.aisle_height}})"><g ng-if="metadata.options.stairs.front_left" ng-attr-transform="translate({{scaled.K}}, 0)"><g ng-if="metadata.layer == 6"><line style="stroke-width: 3;" ng-repeat="i in _.range(0, 5)" x1="0" ng-attr-y1="{{scaled.aisle_height * 0.25 * i}}" ng-attr-x2="{{scaled.K * 2}}" ng-attr-y2="{{scaled.aisle_height * 0.25 * i +scaled.P * 3}}"></line></g><g ng-if="metadata.layer &gt; 6" ng-attr-transform="translate(0, {{scaled.P * 1.5}})"><line style="stroke-width: 3;" ng-if="true" ng-attr-x1="{{scaled.K + scaled.aisle_width}}" ng-attr-y1="{{0}}" ng-attr-x2="{{scaled.K + scaled.aisle_width}}" ng-attr-y2="{{scaled.layer - scaled.P * 4.5 + scaled.aisle_height}}"></line><g ng-repeat="layer in metadata.rooms" ng-if="!$last" ng-attr-transform="translate(0, {{$index * scaled.P * 3}})"><g ng-attr-transform="translate(0, {{scaled.P * 1.5}})"><line style="stroke-width: 3;" ng-repeat="i in _.range(0, 5)" x1="0" ng-attr-y1="{{scaled.aisle_height * 0.25 * i}}" ng-attr-x2="{{scaled.K}}" ng-attr-y2="{{scaled.aisle_height * 0.25 * i +-scaled.P * 1.5}}"></line></g><g ng-attr-transform="translate(0, {{-scaled.P * 1.5}})"><line style="stroke-width: 3;" ng-repeat="i in _.range(0, 5)" x1="0" ng-attr-y1="{{scaled.aisle_height * 0.25 * i}}" ng-attr-x2="{{scaled.K}}" ng-attr-y2="{{scaled.aisle_height * 0.25 * i +scaled.P * 1.5}}"></line></g><g ng-attr-transform="translate({{scaled.K}}, 0)"><line style="stroke-width: 3;" ng-repeat="i in _.range(0, 5)" x1="0" ng-attr-y1="{{scaled.aisle_height * 0.25 * i}}" ng-attr-x2="{{scaled.aisle_width}}" ng-attr-y2="{{scaled.aisle_height * 0.25 * i +0}}"></line><line style="" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{0}}" ng-attr-x2="{{0}}" ng-attr-y2="{{scaled.aisle_height}}"></line></g></g></g></g><g ng-if="metadata.options.stairs.front_right" ng-attr-transform="translate({{scaled.width - scaled.K * 3}}, {{scaled.P * 3}})"><g ng-if="metadata.layer == 6"><line style="stroke-width: 3;" ng-repeat="i in _.range(0, 5)" x1="0" ng-attr-y1="{{scaled.aisle_height * 0.25 * i}}" ng-attr-x2="{{scaled.K * 2}}" ng-attr-y2="{{scaled.aisle_height * 0.25 * i +-scaled.P * 3}}"></line></g><g ng-if="metadata.layer &gt; 6" ng-attr-transform="translate({{scaled.K}}, {{-scaled.P * 1.5}})"><line style="stroke-width: 3;" ng-if="true" ng-attr-x1="{{-scaled.aisle_width}}" ng-attr-y1="{{0}}" ng-attr-x2="{{-scaled.aisle_width}}" ng-attr-y2="{{scaled.layer - scaled.P * 4.5 + scaled.aisle_height}}"></line><g ng-repeat="layer in metadata.rooms" ng-if="!$last" ng-attr-transform="translate(0, {{$index * scaled.P * 3}})"><line style="stroke-width: 3;" ng-repeat="i in _.range(0, 5)" x1="0" ng-attr-y1="{{scaled.aisle_height * 0.25 * i}}" ng-attr-x2="{{scaled.K}}" ng-attr-y2="{{scaled.aisle_height * 0.25 * i +-scaled.P * 1.5}}"></line><line style="stroke-width: 3;" ng-repeat="i in _.range(0, 5)" x1="0" ng-attr-y1="{{scaled.aisle_height * 0.25 * i}}" ng-attr-x2="{{scaled.K}}" ng-attr-y2="{{scaled.aisle_height * 0.25 * i +scaled.P * 1.5}}"></line><g ng-attr-transform="translate({{-scaled.aisle_width}}, 0)"><line style="stroke-width: 3;" ng-repeat="i in _.range(0, 5)" x1="0" ng-attr-y1="{{scaled.aisle_height * 0.25 * i}}" ng-attr-x2="{{scaled.aisle_width}}" ng-attr-y2="{{scaled.aisle_height * 0.25 * i +0}}"></line><line style="" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{0}}" ng-attr-x2="{{0}}" ng-attr-y2="{{scaled.aisle_height}}"></line></g></g></g></g></g><!-- 标尺--><g ng-attr-transform="translate(0, {{scaled.layer + 20}})"><g ng-attr-transform="translate({{-metadata.scale * 80}}, 0)"><g ng-attr-transform=""><line style="" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{0}}" ng-attr-x2="{{0}}" ng-attr-y2="{{40}}"></line><line style="" ng-if="true" ng-attr-x1="{{(scaled.K*metadata.width+metadata.scale*160)}}" ng-attr-y1="{{0}}" ng-attr-x2="{{(scaled.K*metadata.width+metadata.scale*160)}}" ng-attr-y2="{{40}}"></line><line style="" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{40-6}}" ng-attr-x2="{{(scaled.K*metadata.width+metadata.scale*160)}}" ng-attr-y2="{{40-6}}"></line><text style="text-anchor: middle;" ng-attr-x="{{(scaled.K*metadata.width+metadata.scale*160)/2}}" ng-attr-y="{{40-10}}">{{defines.K*metadata.width+160}}</text></g></g><text x="-6" y="0">80</text><text ng-attr-x="{{scaled.K*metadata.width-3}}" y="0">80</text><g ng-repeat="i in _.range(metadata.width)" ng-attr-transform="translate({{scaled.K * $index}}, 0)"><g ng-attr-transform=""><line style="" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{0}}" ng-attr-x2="{{0}}" ng-attr-y2="{{20}}"></line><line style="" ng-if="true" ng-attr-x1="{{(scaled.K)}}" ng-attr-y1="{{0}}" ng-attr-x2="{{(scaled.K)}}" ng-attr-y2="{{20}}"></line><line style="" ng-if="true" ng-attr-x1="{{0}}" ng-attr-y1="{{20-6}}" ng-attr-x2="{{(scaled.K)}}" ng-attr-y2="{{20-6}}"></line><text style="text-anchor: middle;" ng-attr-x="{{(scaled.K)/2}}" ng-attr-y="{{20-10}}">{{defines.K}}</text></g><g transform="translate(0, 60)"><line x1="0" y1="-10" x2="0" y2="-40"></line><circle cx="0" cy="0" r="8" fill="transparent" stroke="black"></circle><text x="-3" y="3">{{$index + 1}}</text><g ng-attr-transform="translate({{scaled.K}}, 0)" ng-if="$last"><line x1="0" y1="-10" x2="0" y2="-40"></line><circle cx="0" cy="0" r="8" fill="transparent" stroke="black"></circle><text x="-3" y="3">{{$index + 2}}</text></g></g></g></g></g></svg>